+++
title = "Sync/Async Logging"
date = "2022-08-14"
+++

## Logging
Текст который передаеются в стандартные потоки процесса: stdout/stderr
Может быть fromatt-ированный или текущая meta в виде json.

## Async logging?
Есть различные библиотеки, которые позволяют писать логги асинхронно. То есть между вызовом метода `log` и `std*` есть какой-то программный буффер, который лишь раз в х флашится (запись + очистка) в `std*`. Это уменьшает latancy из-за необязательности sys-call-а.

## Зачем нужен logging?
Для того чтобы понять возможность использования подобных библиотека важно понять как мы вообще используем логги:
- для дебага или отложенного дебага. Но если при этом происходит краш, то при использовании асинхронных логов случится так, что буффер логгов не флешнется и мы получим ситуацию, в которой проблема есть, а логов по которой её решать нет. Поэтому все, что про дебаг и ошибки должно быть синхронным (как пример сентри).
- для проверки факта запуска того или иного. Типо посмотреть пользуются ли вообще той или иной ручкой и какие параметры передают. Или отработала ли джоба То кажется логгер мог бы быть асинхронным. Но с другой стороны зачем нам здесь логгер? Кажется гораздо больше подходят метрики. Логгер будет подходить, только если мы хотим сохранять параметры. И тут опять важно хотим ли мы точности или нам ок, если часть потеряется.
- просто как мусорка. Это самое частое использование логгов. В этом сценарии не ясно зачем вообще логи.

Итого: там где логги нужны там важно чтобы они были синхронные. А там где нет в целом без разницы.
